define ("local_remote_backup_provider/list",["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(b,c){var d=b.find("tr:has(td)"),e=String.fromCharCode(11),f=String.fromCharCode(0),g="\""+d.map(function(b,c){var d=a(c),e=d.find("td.includeincsv");return e.map(function(b,c){var d=a(c),e=d.text();return e.replace(/"/g,"\"\"")}).get().join("\x0B")}).get().join("\0").split("\0").join("\"\r\n\"").split("\x0B").join("\",\"")+"\"";if(window.navigator.msSaveBlob){var h=new Blob([decodeURIComponent(g)],{type:"text/csv;charset=utf8"});window.navigator.msSaveBlob(h,c)}else if(window.Blob&&window.URL){var h=new Blob([g],{type:"text/csv;charset=utf-8"}),i=URL.createObjectURL(h);a(this).attr({download:c,href:i})}else{var j="data:application/csv;charset=utf-8,"+encodeURIComponent(g);a(this).attr({download:c,href:j,target:"_blank"})}};return{init:function init(){a(".rbp_dropdown").change(function(){var b=a(this).find(".optionvalue:selected");if(!b){alert("we drew blank")}var c={id:a(this).val(),username:b.data("username"),firstname:b.data("firstname"),lastname:b.data("lastname"),useremail:b.data("useremail")},d=a("#rbp_userrow_"+this.id),e={id:this.id,username:d.data("username"),firstname:d.data("firstname"),lastname:d.data("lastname"),useremail:d.data("useremail")};d.find("td").eq(0).html(c.username);d.find("td").eq(1).html(c.firstname);d.find("td").eq(2).html(c.lastname);d.find("td").eq(3).html(c.useremail);d.data("username",c.username);d.data("firstname",c.firstname);d.data("lastname",c.lastname);d.data("useremail",c.useremail);b.data("username",e.username);b.data("firstname",e.firstname);b.data("lastname",e.lastname);b.data("useremail",e.useremail);b.text(e.username+" "+e.useremail);var f=a(this).find(".blankvalue");f.text("Merged with existing user");f.attr("selected","selected");f.removeAttr("selected")});a(".rbp_delete").click(function(){var d=a("#tabletoexport").data("restoreid"),e=this.id;b.call([{methodname:"local_remote_backup_provider_delete_user_entry_from_backup",args:{id:this.id,restoreid:d},done:function done(){a("#rbp_userrow_"+e).remove()},fail:c.exception}])});a("#linktodownload").click(function(){var b=[a("#tabletoexport>table"),"userlist.csv"];d.apply(this,b)})}}});
//# sourceMappingURL=list.min.js.map
